<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dinoscriptz Hub</title>
<style>
  /* Basic reset */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #121212;
    color: #eee;
  }
  header {
    padding: 1rem;
    text-align: center;
    font-size: 2rem;
    font-weight: 700;
    background: linear-gradient(90deg, #1a73e8, #4285f4);
    color: white;
  }
  nav {
    display: flex;
    background: #222;
  }
  nav button {
    flex: 1;
    background: transparent;
    border: none;
    color: #ccc;
    padding: 1rem 0;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
  }
  nav button:hover {
    background: #1a73e8;
    color: white;
  }
  nav button.active {
    background: #1a73e8;
    color: white;
  }
  main {
    padding: 1rem;
    min-height: 300px;
    max-width: 900px;
    margin: 0 auto;
    background: #1e1e1e;
    border-radius: 8px;
    box-shadow: 0 0 12px #0008;
  }
  a {
    color: #1a73e8;
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }
  ul.file-list {
    list-style: none;
    padding-left: 0;
  }
  ul.file-list li {
    margin: 0.3rem 0;
  }
  button.install-btn {
    background: #1a73e8;
    border: none;
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    color: white;
    cursor: pointer;
    border-radius: 6px;
    transition: background-color 0.3s;
  }
  button.install-btn:hover {
    background: #4285f4;
  }
  /* Loading spinner */
  .spinner {
    margin: 2rem auto;
    border: 6px solid #333;
    border-top: 6px solid #1a73e8;
    border-radius: 50%;
    width: 48px;
    height: 48px;
    animation: spin 1s linear infinite;
  }
  @keyframes spin {
    0% { transform: rotate(0deg);}
    100% { transform: rotate(360deg);}
  }
  /* Fade in content */
  .content-fade {
    animation: fadeIn 0.5s ease forwards;
    opacity: 0;
  }
  @keyframes fadeIn {
    to {opacity: 1;}
  }
</style>
</head>
<body>

<header>Dinoscriptz Hub</header>

<nav aria-label="Primary">
  <button id="tabScripts" class="active" aria-controls="contentScripts" role="tab" aria-selected="true">Script(z)</button>
  <button id="tabCredits" aria-controls="contentCredits" role="tab" aria-selected="false">Credit(z)</button>
  <button id="tabGitHub" aria-controls="contentGitHub" role="tab" aria-selected="false">GitHub</button>
  <button id="tabInstall" aria-controls="contentInstall" role="tab" aria-selected="false">Install Our Script(z)</button>
</nav>

<main>
  <section id="contentScripts" role="tabpanel" aria-labelledby="tabScripts">
    <div id="scriptsContainer">
      <div class="spinner" aria-label="Loading scripts"></div>
    </div>
  </section>

  <section id="contentCredits" role="tabpanel" aria-labelledby="tabCredits" hidden>
    <p>
      Credits can be found by clicking <a href="https://github.com/Epicinver/Dinoscriptz/blob/main/credits.md" target="_blank" rel="noopener noreferrer">here</a>.
    </p>
  </section>

  <section id="contentGitHub" role="tabpanel" aria-labelledby="tabGitHub" hidden>
    <p>
      Visit our GitHub repository here <a href="https://github.com/Epicinver/Dinoscriptz" target="_blank" rel="noopener noreferrer">github.com/Epicinver/Dinoscriptz</a>
    </p>
  </section>

  <section id="contentInstall" role="tabpanel" aria-labelledby="tabInstall" hidden>
    <p>Click the button below to visit the GitHub repository and follow these instructions to inject our scripts:</p>
    <header>Instructions</header>
    <p>Copy the script, and paste it into the console tab of the DevTools, depending on what browser you use.</p>
    <button class="install-btn" onclick="window.open('https://github.com/Epicinver/Dinoscriptz', '_blank', 'noopener')">Scripts</button>
  </section>
</main>

<script>
  // Tab handling
  const tabs = document.querySelectorAll('nav button');
  const sections = document.querySelectorAll('main section');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => {
        t.classList.remove('active');
        t.setAttribute('aria-selected', 'false');
      });
      tab.classList.add('active');
      tab.setAttribute('aria-selected', 'true');

      sections.forEach(section => {
        if (section.id === 'content' + tab.id.replace('tab', '')) {
          section.hidden = false;
          section.classList.add('content-fade');
        } else {
          section.hidden = true;
          section.classList.remove('content-fade');
        }
      });
    });
  });

  // GitHub repo info
  const owner = 'Epicinver';
  const repo = 'Dinoscriptz';

  // Recursive fetch all files from the repo
  async function fetchAllFiles(path = '') {
    const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;
    const res = await fetch(url);
    if (!res.ok) throw new Error(`GitHub API error: ${res.status}`);
    const data = await res.json();

    let files = [];
    for (const item of data) {
      if (item.type === 'file' && item.name.endsWith('.js')) {
        files.push({name: item.name, path: item.path, download_url: item.download_url});
      } else if (item.type === 'dir') {
        const nestedFiles = await fetchAllFiles(item.path);
        files = files.concat(nestedFiles);
      }
    }
    return files;
  }

  // Render the scripts list
  async function loadScripts() {
    const container = document.getElementById('scriptsContainer');
    try {
      const files = await fetchAllFiles();
      container.innerHTML = '';
      if (files.length === 0) {
        container.textContent = 'No JavaScript files found in the repository.';
        return;
      }
      const ul = document.createElement('ul');
      ul.className = 'file-list';
      for (const file of files) {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = file.download_url;
        a.textContent = file.path;
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
        li.appendChild(a);
        ul.appendChild(li);
      }
      container.appendChild(ul);
    } catch (e) {
      container.textContent = 'Failed to load scripts: ' + e.message;
      console.error(e);
    }
  }

  loadScripts();
</script>

</body>
</html>
